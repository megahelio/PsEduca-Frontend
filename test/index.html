<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test PsEduca</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>

<body>
    <h1>Test de validación de formularios</h1>

    <p>El test detecta errores para el valor introducido: True</p>
    <p>El test detecta no errores para el valor introducido (El valor introducido es válido): False</p>

    <h2>Validación de Contacto</h2>
    <table id="table-test-contact">
        <tr>
            <th>Test</th>
            <th>Valor</th>
            <th>Resultado esperado</th>
            <th>Resultado obtenido</th>
        </tr>
    </table>

    <h2>Validación de Inicio de Sesión</h2>
    <table id="table-test-login">
        <tr>
            <th>Test</th>
            <th>Valor</th>
            <th>Resultado esperado</th>
            <th>Resultado obtenido</th>
        </tr>
    </table>

    <h2>Validación de Usuario</h2>
    <table id="table-test-user">
        <tr>
            <th>Test</th>
            <th>Valor</th>
            <th>Resultado esperado</th>
            <th>Resultado obtenido</th>
        </tr>
    </table>
</body>
<script type="module">
    let table = document.getElementById('table-test-contact');

    // Función para agregar una fila a la tabla
    function testValidation(test, value_to_test, expected, result) {
        const row = table.insertRow(-1);
        const cell1 = row.insertCell(0);
        const cell2 = row.insertCell(1);
        const cell3 = row.insertCell(2);
        const cell4 = row.insertCell(3);
        cell1.innerHTML = test;
        cell2.innerHTML = value_to_test;
        cell3.innerHTML = expected;
        cell4.innerHTML = result;

        if (expected === result) {
            cell4.style.backgroundColor = '#00AF0055';
        } else {
            cell4.style.backgroundColor = 'red';
        }
    }


    // CONTACT VALIDATION
    import { validateEmail } from '../validators/contact.js';

    var value_to_test = '';
    const emptyName = validateEmail({ name: value_to_test, email: 'email@email.com', subject: 'Test subject', message: 'Message test' });
    testValidation('Nombre vacío', value_to_test, true, Boolean(emptyName.all));

    value_to_test = 'a';
    const shortName = validateEmail({ name: value_to_test, email: 'email@email.com', subject: 'Test subject', message: 'Message test' });
    testValidation('Nombre muy corto (< 4)', value_to_test, true, Boolean(shortName.name));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
        Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque
        penatibus et magnis dis parturient montes, nascetur ridiculus mus.
        Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.`;
    const longName = validateEmail({ name: value_to_test, email: 'email@email.com', subject: 'Test subject', message: 'Message test' });
    testValidation('Nombre muy largo (> 254)', value_to_test, true, Boolean(longName.name));

    value_to_test = 'Name123@';
    const badCharactersName = validateEmail({ name: value_to_test, email: 'email@email.com', subject: 'Test subject', message: 'Message test' });
    testValidation('Nombre con caracteres no permitidos (p.e: @)', value_to_test, true, Boolean(badCharactersName.name));

    value_to_test = 'Name';
    const validName = validateEmail({ name: value_to_test, email: 'email@email.com', subject: 'Test subject', message: 'Message test' });
    testValidation('Nombre válido', value_to_test, false, Boolean(validName.name));

    value_to_test = '';
    const emptyEmail = validateEmail({ name: 'Name', email: value_to_test, subject: 'Test subject', message: 'Message test' });
    testValidation('Email vacío', value_to_test, true, Boolean(emptyEmail.all));

    value_to_test = 'email.com';
    const invalidEmail = validateEmail({ name: 'Name', email: value_to_test, subject: 'Test subject', message: 'Message test' });
    testValidation('Email inválido (p.e: email.com)', value_to_test, true, Boolean(invalidEmail.email));

    value_to_test = 'email@email.com';
    const validEmail = validateEmail({ name: 'Name', email: value_to_test, subject: 'Test subject', message: 'Message test' });
    testValidation('Email válido', value_to_test, false, Boolean(validEmail.email));

    value_to_test = '';
    const emptySubject = validateEmail({ name: 'Name', email: 'email@email.com', subject: value_to_test, message: 'Message test' });
    testValidation('Asunto vacío', value_to_test, true, Boolean(emptySubject.all));

    value_to_test = 'a';
    const shortSubject = validateEmail({ name: 'Name', email: 'email@email.com', subject: value_to_test, message: 'Message test' });
    testValidation('Asunto muy corto (< 4)', value_to_test, true, Boolean(shortSubject.subject));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque`;
    const longSubject = validateEmail({ name: 'Name', email: 'email@email.com', subject: value_to_test, message: 'Message test' });
    testValidation('Asunto muy largo (> 50)', value_to_test, true, Boolean(longSubject.subject));

    value_to_test = 'Test subject';
    const validSubject = validateEmail({ name: 'Name', email: 'email@email.com', subject: value_to_test, message: 'Message test' });
    testValidation('Asunto válido', value_to_test, false, Boolean(validSubject.subject));

    value_to_test = '';
    const emptyMessage = validateEmail({ name: 'Name', email: 'email@email.com', subject: 'Test subject', message: value_to_test });
    testValidation('Mensaje vacío', value_to_test, true, Boolean(emptyMessage.all));

    value_to_test = 'a';
    const shortMessage = validateEmail({ name: 'Name', email: 'email@email.com', subject: 'Test subject', message: value_to_test });
    testValidation('Mensaje muy corto (< 10)', value_to_test, true, Boolean(shortMessage.message));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.Lorem ipsum dolor sit amet, consectetuer adipiscing elit.Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoquepenatibus et magnis dis parturient montes, nascetur ridiculus mus.Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.`; // Truncated for brevity
    const longMessage = validateEmail({ name: 'Name', email: 'email@email.com', subject: 'Test subject', message: value_to_test });
    testValidation('Mensaje muy largo (> 5000)', value_to_test, true, Boolean(longMessage.message));

    value_to_test = 'Message test';
    const validMessage = validateEmail({ name: 'Name', email: 'email@email.com', subject: 'Test subject', message: value_to_test });
    testValidation('Mensaje válido', value_to_test, false, Boolean(validMessage.message));
    // LOG IN VALIDATION
    import { validateLogin } from '../validators/user.js';

    table = document.getElementById('table-test-login');

    value_to_test = '';
    const emptyUsername = validateLogin({ username: value_to_test, password: 'password' });
    testValidation('Usuario vacío', value_to_test, true, Boolean(emptyUsername.all));

    value_to_test = 'a';
    const shortUsername = validateLogin({ username: value_to_test, password: 'password' });
    testValidation('Usuario muy corto (< 4)', value_to_test, true, Boolean(shortUsername.username));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque`;
    const longUsername = validateLogin({ username: value_to_test, password: 'password' });
    testValidation('Usuario muy largo (> 254)', value_to_test, true, Boolean(longUsername.username));

    value_to_test = 'Username';
    const validUsername = validateLogin({ username: value_to_test, password: 'password' });
    testValidation('Usuario válido', value_to_test, false, Boolean(validUsername.username));

    value_to_test = '';
    const emptyPassword = validateLogin({ username: 'Username', password: value_to_test });
    testValidation('Contraseña vacía', value_to_test, true, Boolean(emptyPassword.all));

    value_to_test = 'a';
    const shortPassword = validateLogin({ username: 'Username', password: value_to_test });
    testValidation('Contraseña muy corta (< 8)', value_to_test, true, Boolean(shortPassword.password));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque`;
    const longPassword = validateLogin({ username: 'Username', password: value_to_test });
    testValidation('Contraseña muy larga (> 254)', value_to_test, true, Boolean(longPassword.password));

    value_to_test = 'password';
    const validPassword = validateLogin({ username: 'Username', password: value_to_test });
    testValidation('Contraseña válida', value_to_test, false, Boolean(validPassword.password));

    import { validateUser } from '../validators/user.js';

    table = document.getElementById('table-test-user');

    let isUpdate = false;
    value_to_test = '';
    const emptyUserName = validateUser({ username: value_to_test, fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre vacío', value_to_test, true, Boolean(emptyUserName.all));

    value_to_test = 'a';
    const shortUserName = validateUser({ username: value_to_test, fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre muy corto (< 4)', value_to_test, true, Boolean(shortUserName.username));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque`;
    const longUserName = validateUser({ username: value_to_test, fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre muy largo (> 254)', value_to_test, true, Boolean(longUserName.username));

    value_to_test = 'Test';
    const validUserName = validateUser({ username: value_to_test, fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre válido', value_to_test, false, Boolean(validUserName.username));

    value_to_test = '';
    const emptyFullName = validateUser({ username: 'Test', fullname: value_to_test, password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre completo vacío', value_to_test, true, Boolean(emptyFullName.all));

    value_to_test = 'a';
    const shortFullName = validateUser({ username: 'Test', fullname: value_to_test, password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre completo muy corto (< 4)', value_to_test, true, Boolean(shortFullName.name));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque`;
    const longFullName = validateUser({ username: 'Test', fullname: value_to_test, password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre completo muy largo (> 254)', value_to_test, true, Boolean(longFullName.name));

    value_to_test = 'Test Johnson';
    const validFullName = validateUser({ username: 'Test', fullname: value_to_test, password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Nombre completo válido', value_to_test, false, Boolean(validFullName.name));

    value_to_test = 'a';
    const shortPasswordUser = validateUser({ username: 'Test', fullname: 'Test Johnson', password: value_to_test, confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Contraseña muy corta (< 8)', value_to_test, true, Boolean(shortPasswordUser.password));

    value_to_test = `Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque`;
    const longPasswordUser = validateUser({ username: 'Test', fullname: 'Test Johnson', password: value_to_test, confirmPassword: 'testPassword' }, isUpdate);
    testValidation('Contraseña muy larga (> 254)', value_to_test, true, Boolean(longPasswordUser.password));

    value_to_test = 'testPassword';
    const validPasswordUser = validateUser({ username: 'Test', fullname: 'Test Johnson', password: value_to_test, confirmPassword: value_to_test }, isUpdate);
    testValidation('Contraseña válida', value_to_test, false, Boolean(validPasswordUser.password));

    value_to_test = 'testPassword2';
    const differentPasswords = validateUser({ username: 'Test', fullname: 'Test Johnson', password: 'testPassword', confirmPassword: value_to_test }, isUpdate);
    testValidation('Contraseñas diferentes', value_to_test, true, Boolean(differentPasswords['confirm-password']));

    isUpdate = true;

    value_to_test = '';
    const emptyId = validateUser({ id: value_to_test, username: 'Test', fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('ID vacío', value_to_test, true, Boolean(emptyId.all));

    value_to_test = '#';
    const validNaNId = validateUser({ id: value_to_test, username: 'Test', fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('ID no numérico', value_to_test, true, Boolean(validNaNId.all));

    value_to_test = '1';
    const validId = validateUser({ id: value_to_test, username: 'Test', fullname: 'Test Johnson', password: 'testPassword', confirmPassword: 'testPassword' }, isUpdate);
    testValidation('ID válido', value_to_test, false, Boolean(validId.all));

</script>

</html>